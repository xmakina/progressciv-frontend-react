(this["webpackJsonpprogressciv-frontend"]=this["webpackJsonpprogressciv-frontend"]||[]).push([[0],{22:function(e){e.exports=JSON.parse('{"items":[{"product":"wheat","quantity":2,"time":1000,"startingActive":1,"upgrades":[{"aspect":"production","operation":"+","amount":1,"demands":{"farm":1}}]},{"product":"wood","quantity":1,"time":1000,"startingActive":1,"upgrades":[{"aspect":"production","operation":"+","amount":1,"demands":{"forest":1}}]},{"product":"worker","quantity":1,"time":3000,"startingActive":1,"demands":{"wheat":10}},{"product":"farm","quantity":1,"time":10000,"startingActive":1,"demands":{"wood":5,"wheat":2},"upgrades":[{"aspect":"production","operation":"+","amount":1,"demands":{"building-site":1}}]},{"product":"forest","quantity":1,"time":10000,"startingActive":1,"demands":{"wood":10}},{"product":"coal","quantity":5,"time":8000,"startingActive":0,"upgrades":[{"aspect":"production","operation":"+","amount":1,"demands":{"mine":1}}]},{"product":"fuel","quantity":1,"time":2000,"startingActive":1,"demands":{"wood":3}},{"product":"fuel","quantity":5,"time":2000,"startingActive":1,"demands":{"coal":1}},{"product":"mine","quantity":1,"time":20000,"startingActive":1,"demands":{"wood":25}},{"product":"furnace","quantity":1,"time":20000,"startingActive":1,"demands":{"stone":5}}]}')},34:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),o=n(27),i=n.n(o),a=(n(33),n(34),n(2)),s=n(17),d=n(15),u=n(16),p=n(0),l={wheat:"\ud83c\udf3d",worker:"\ud83d\udcaa",wood:"\ud83c\udf33",farm:"\ud83c\udf3e\ud83c\udf3e",forest:"\ud83c\udf32\ud83c\udf32\ud83c\udf32","large-red-circle":"\ud83d\udd34","large-green-circle":"\ud83d\udfe2","allow production":"\u2699\ufe0f","allow demand to be met":"\ud83d\udce6",time:"\u231b",quantity:"\u2b06\ufe0f","shopping-cart":"\ud83d\uded2",production:"\u2699\ufe0f","building-site":"\ud83c\udfd7\ufe0f"};function m(e){return Object(p.jsx)("span",{title:e,children:void 0===l[e]?e:l[e]})}n(65);function j(e){var t=e.percent,n=void 0===t?0:t,c=e.always,r=void 0!==c&&c,o=e.children;return Object(p.jsxs)("div",{className:"production-bar",style:{width:"100%"},children:[Object(p.jsx)("span",{className:"label",children:o}),!r&&Object(p.jsx)("div",{className:"production-progress-bar bg-success",style:{width:"".concat(n,"%")}}),r&&Object(p.jsx)("div",{className:"production-progress-bar bg-success meter always",children:Object(p.jsx)("span",{style:{width:"100%"},children:Object(p.jsx)("span",{})})})]})}n(66);var b=function(e,t){return Object(p.jsx)("div",{className:"requirement",children:Object(p.jsxs)(j,{percent:e.quantity/e.capacity*100,children:[e.quantity," / ",e.capacity," ",m(e.resource)]})},t)};function O(e){var t=e.requirements,n=void 0===t?[]:t;e.met;return 0===n.length?Object(p.jsx)("div",{className:"requirements none"}):Object(p.jsx)("div",{className:"requirements",children:n.map(b)})}n(67),n(68);function f(e){var t=e.onClick,n=void 0===t?function(){}:t,c=e.state,r=void 0!==c&&c,o=e.icon;return Object(p.jsx)("div",{className:"button ".concat(r?"open":"closed"),onClick:n,children:o})}n(69);var g=function(e,t){return Object(p.jsxs)("div",{className:"upgrade",children:[Object(p.jsxs)("div",{className:"effect",children:[Object(p.jsx)("div",{className:"aspect",children:m(e.aspect)}),Object(p.jsxs)("div",{className:"improvement",children:[e.operation,e.amount]})]}),Object(p.jsx)("div",{className:"demands",children:Object.keys(e.demands).map((function(t){return function(e,t,n){return Object(p.jsxs)("div",{className:"demand",children:[Object(p.jsx)("div",{className:"resource",children:m(e)}),Object(p.jsxs)("div",{className:"amount",children:["x",t]}),Object(p.jsx)(f,{icon:m("shopping-cart"),state:n.requested,onClick:function(){return n.requestToggle()}})]},e)}(t,e.demands[t],e)}))})]},t)};function v(e){var t=e.upgrades;return Object(p.jsx)("div",{className:"upgrades",children:t.sort((function(e,t){return e.aspect<t.aspect?1:-1})).map(g)})}n(70);var h=function(e,t){return Object(p.jsx)("div",{className:"production",children:Object(p.jsx)(j,{percent:e.percent,always:"0.00"===(e.productionTime/1e3).toFixed(2)})},t)};function x(e){var t=e.productions;return Object(p.jsx)("div",{className:"productions",children:t.map(h)})}var y=n(3),w=n(23),k=function(e,t){var n=t.productionList.maximumActive>0,c=e.existed[t.supply.product.resource],r=0===Object.keys(t.demand.demands).length,o=Object.keys(t.demand.demands).reduce((function(t,n){return t&&e.existed[n]}),!0),i=t.upgrade.upgrades.filter((function(e){return"production"===e.aspect})).length>0,a=t.upgrade.upgrades.filter((function(e){return"production"===e.aspect})).reduce((function(e,t){return[].concat(Object(w.a)(e),Object(w.a)(Object.keys(t.demands)))}),[]).reduce((function(t,n){return t&&e.existed[n]}),!0);return!!c||(!(!n||!r)||(!(!n||!o)||!(!i||!a)))},q=function(){function e(){Object(d.a)(this,e)}return Object(u.a)(e,[{key:"update",value:function(t,n){var c=Object(a.getComponent)(n.filter(Object(a.HasComponent)(a.Store))[0],a.Store),r=n.filter(Object(a.HasComponent)(a.Demand)).filter(Object(a.HasComponent)(a.ProductionList)).filter(Object(a.HasComponent)(a.Supply)).map((function(e){return{id:e.id,demand:Object(a.getComponent)(e,a.Demand),productionList:Object(a.getComponent)(e,a.ProductionList),supply:Object(a.getComponent)(e,a.Supply),upgrade:Object(a.hasComponent)(e,a.Upgrade)?Object(a.getComponent)(e,a.Upgrade):new a.Upgrade({upgrades:[]})}})).map((function(e){return{displayItem:k(c,e),product:e.supply.product.resource,quantity:e.supply.product.quantity,storage:c.stocks[e.supply.product.resource],capacity:c.capacities[e.supply.product.resource],met:e.demand.met,productions:e.productionList.productions.map((function(e){return{percent:Math.min(e.progress/e.productionTime*100,100),productionTime:e.productionTime}})),open:e.demand.open,working:e.demand.working,canWork:e.productionList.maximumActive>0,handleOpen:function(){e.demand.open=!e.demand.open},handleWorking:function(){e.demand.working=!e.demand.working},requirements:Object.keys(e.demand.demands).map((function(t){var n;return{resource:t,quantity:null!==(n=e.demand.store.stocks[t])&&void 0!==n?n:0,capacity:e.demand.store.capacities[t]}})),upgrades:e.upgrade.upgrades.map((function(e){return{amount:e.amount,aspect:e.aspect,operation:e.operation,demands:e.demands,requested:e.requested,requestToggle:function(){e.requested=!e.requested}}}))}}));e.setItems(r)}}]),e}();q.setItems=function(){};var N=function(e,t){return Object(p.jsxs)("div",{className:"item",children:[0===t&&Object(p.jsxs)("h1",{className:"label",children:[m(e.product)," ",Object(p.jsx)("span",{hidden:(n=e.product,!(void 0!==l[n])),children:e.product})]}),e.displayItem&&Object(p.jsxs)("div",{className:"item-details",children:[Object(p.jsxs)("div",{className:"storehouse",children:[Object(p.jsx)("div",{className:"open-button",children:e.canWork&&e.requirements.length>0&&Object(p.jsx)(f,{icon:m("allow demand to be met"),state:e.open,onClick:function(){return e.handleOpen()}})}),Object(p.jsx)(O,{requirements:e.requirements,met:e.met})]}),Object(p.jsxs)("div",{className:"workhouse",children:[Object(p.jsx)("div",{className:"working-button",children:e.canWork&&Object(p.jsx)(f,{icon:m("allow production"),state:e.working,onClick:function(){return e.handleWorking()}})}),Object(p.jsx)(x,{productions:e.productions})]}),Object(p.jsx)(v,{upgrades:e.upgrades})]})]},t);var n};function C(){var e=Object(y.f)().id,t=Object(c.useState)([]),n=Object(s.a)(t,2),r=n[0],o=n[1];return q.setItems=o,Object(p.jsx)("div",{id:"items",children:r.filter((function(t){return t.product===e})).map(N)})}var A=n(22),S=(n(76),n(11)),I=(n(77),function(){function e(){Object(d.a)(this,e)}return Object(u.a)(e,[{key:"update",value:function(t,n){var c=Object(a.getComponent)(n.filter(Object(a.HasComponent)(a.Store))[0],a.Store),r=n.filter(Object(a.HasComponent)(a.Demand)).filter(Object(a.HasComponent)(a.ProductionList)).filter(Object(a.HasComponent)(a.Supply)).map((function(e){return{demand:Object(a.getComponent)(e,a.Demand),productionList:Object(a.getComponent)(e,a.ProductionList),supply:Object(a.getComponent)(e,a.Supply),upgrade:Object(a.hasComponent)(e,a.Upgrade)?Object(a.getComponent)(e,a.Upgrade):new a.Upgrade({upgrades:[]})}})).map((function(e){var t;return{display:k(c,e),product:e.supply.product.resource,amount:null!==(t=c.stocks[e.supply.product.resource])&&void 0!==t?t:0,capacity:c.capacities[e.supply.product.resource],open:e.demand.open,working:e.demand.working,canWork:e.productionList.maximumActive>0,hasRequirements:Object.keys(e.demand.demands).length>0,handleOpen:function(){e.demand.open=!e.demand.open},handleWorking:function(){e.demand.working=!e.demand.working}}}));e.setStorage(r)}}]),e}());I.setStorage=function(){};var L=function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{className:"open-button",children:e.isUnique&&e.value.hasRequirements&&e.value.canWork&&Object(p.jsx)(f,{icon:m("allow demand to be met"),state:e.value.open,onClick:function(){return e.value.handleOpen()}})}),Object(p.jsx)("td",{className:"working-button",children:e.isUnique&&e.value.canWork&&Object(p.jsx)(f,{icon:m("allow production"),state:e.value.working,onClick:function(){return e.value.handleWorking()}})}),Object(p.jsx)("td",{className:"product",children:Object(p.jsx)(S.b,{to:"/".concat(e.value.product),children:m(e.value.product)})}),Object(p.jsxs)("td",{className:"stockpile",children:[e.value.amount," / ",e.value.capacity]})]},t)};function T(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1];I.setStorage=r;var o=n.filter((function(e){return e.display})).map((function(e){var t=e;return{value:e,isUnique:1===n.filter((function(e){return e.product===t.product})).length}})),i=o.filter((function(e,t){return t===o.findIndex((function(t){return t.value.product===e.value.product}))}));return Object(p.jsx)("table",{className:"storage",children:Object(p.jsx)("tbody",{children:i.map(L)})})}n(78);function U(){return Object(p.jsxs)("div",{className:"home",children:[Object(p.jsx)(T,{}),Object(p.jsx)(y.c,{children:Object(p.jsx)(y.a,{path:"/:id",children:Object(p.jsx)(C,{})})})]})}var W=n.p+"static/media/logo.0c78ae67.png",H=!1,P=function e(t){return function(){H?H=!1:(t.Update(),window.setTimeout(e(t),25))}};var D=function(){var e=Object(c.useRef)();return Object(c.useMemo)((function(){console.log({BaseItems:A});var t=new a.ProgressCivAPI(A),n=new q,c=new I;t.Instance.systems.push(n),t.Instance.systems.push(c),e.current=function(){return t.Save()},H=!0,window.setTimeout(P(t),100)}),[]),Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"App-header",children:Object(p.jsx)("div",{className:"App-logo",children:Object(p.jsx)("img",{src:W,alt:"progress civ"})})}),Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(S.a,{children:Object(p.jsx)(U,{})})})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),o(e),i(e)}))};i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(D,{})}),document.getElementById("root")),F()}},[[80,1,2]]]);
//# sourceMappingURL=main.b753270f.chunk.js.map