{"version":3,"sources":["utils/ToEmoji.tsx","component/ProgressBar/ProgressBar.tsx","component/Requirements/Requirements.tsx","component/ToggleButton/ToggleButton.tsx","component/Upgrades/Upgrades.tsx","component/Productions/Productions.tsx","utils/DisplayItem.ts","component/Items/Items.tsx","component/Storage/Storage.tsx","component/Home/Home.tsx","logo.png","App.tsx","reportWebVitals.ts","index.tsx"],"names":["emoji","wheat","worker","wood","farm","forest","time","quantity","production","ToEmoji","label","title","undefined","ProgressBar","percent","always","children","className","style","width","ToRequirement","r","i","capacity","resource","Requirements","requirements","met","length","map","ToggleButton","onClick","state","icon","ToUpgrade","u","index","aspect","operation","amount","Object","keys","demands","k","requested","requestToggle","ToDemand","Upgrades","upgrades","sort","a","b","ToProduction","item","productionTime","toFixed","Productions","productions","DisplayItem","store","hasProduction","productionList","maximumActive","hasExisted","existed","supply","product","hasNoDemands","demand","hasAllDemandsCreated","reduce","acc","hasProductionUpgrades","upgrade","filter","hasProductionUpgradesWhichCanBeBuilt","ItemRenderSystem","_","entities","getComponent","HasComponent","Store","itemsView","Demand","ProductionList","Supply","e","id","hasComponent","Upgrade","displayItem","storage","stocks","capacities","p","Math","min","progress","open","working","canWork","handleOpen","handleWorking","setItems","ToItem","hidden","Items","useParams","useState","items","StorageRenderSystem","display","hasRequirements","setStorage","ToStorageView","unique","isUnique","value","to","Storage","addUniqueness","s","thing","_thing","obj","uniqueArray","findIndex","Home","path","isRunning","Update","progressCivAPI","console","log","window","setTimeout","App","save","useRef","useMemo","ProgressCivAPI","BaseItems","itemRenderSystem","storageRenderSystem","Instance","systems","push","current","Save","src","logo","alt","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5b14a80b.chunk.js","sourcesContent":["import { ReactElement } from 'react'\r\n\r\nconst emoji: {[index: string]: string} = {\r\n  wheat: 'üåΩ',\r\n  worker: 'üí™',\r\n  wood: 'üå≥',\r\n  farm: 'üåæüåæ',\r\n  forest: 'üå≤üå≤üå≤',\r\n  'large-red-circle': 'üî¥',\r\n  'large-green-circle': 'üü¢',\r\n  'allow production': '‚öôÔ∏è',\r\n  'allow demand to be met': 'üì¶',\r\n  time: '‚åõ',\r\n  quantity: '‚¨ÜÔ∏è',\r\n  'shopping-cart': 'üõí',\r\n  production: '‚öôÔ∏è',\r\n  'building-site': 'üèóÔ∏è'\r\n}\r\n\r\nexport function HasEmoji (label: string): boolean {\r\n  return emoji[label] !== undefined\r\n}\r\n\r\nexport default function ToEmoji (label: string): ReactElement {\r\n  return (<span title={label}>{emoji[label] === undefined ? label : emoji[label]}</span>)\r\n}\r\n","import { ReactElement, ReactNode } from 'react'\r\nimport './ProgressBar.css'\r\n\r\ninterface Props {\r\n  percent: number\r\n  always?: boolean\r\n  children?: ReactNode\r\n}\r\n\r\nexport default function ProgressBar ({ percent = 0, always = false, children }: Props): ReactElement {\r\n  return (\r\n    <div className='production-bar' style={{ width: '100%' }}>\r\n      <span className='label'>{children}</span>\r\n      {!always && <div className='production-progress-bar bg-success' style={{ width: `${percent}%` }} />}\r\n      {always && <div className='production-progress-bar bg-success meter always'><span style={{ width: '100%' }}><span /></span></div>}\r\n    </div>\r\n  )\r\n}\r\n","import React, { ReactElement } from 'react'\r\nimport StorageView from '../../interface/StorageView'\r\nimport ToEmoji from '../../utils/ToEmoji'\r\nimport ProgressBar from '../ProgressBar/ProgressBar'\r\nimport './Requirements.css'\r\n\r\ninterface Props {\r\n  requirements?: StorageView[]\r\n  met?: boolean\r\n}\r\n\r\nconst ToRequirement = (r: StorageView, i: number): ReactElement =>\r\n  <div className='requirement' key={i}>\r\n    <ProgressBar percent={(r.quantity / r.capacity) * 100}>\r\n      {r.quantity} / {r.capacity} {ToEmoji(r.resource)}\r\n    </ProgressBar>\r\n  </div>\r\n\r\nexport default function Requirements ({ requirements = [], met = false }: Props): ReactElement {\r\n  if (requirements.length === 0) {\r\n    return (<div className='requirements none' />)\r\n  }\r\n\r\n  return (\r\n    <div className='requirements'>\r\n      {requirements.map(ToRequirement)}\r\n    </div>\r\n  )\r\n}\r\n","import { ReactElement } from 'react'\r\nimport './ToggleButton.css'\r\n\r\ninterface Props {\r\n  onClick: () => void\r\n  state?: boolean\r\n  icon: ReactElement\r\n}\r\n\r\nexport default function ToggleButton ({ onClick = () => {}, state = false, icon }: Props): ReactElement {\r\n  return (\r\n    <div className={`button ${state ? 'open' : 'closed'}`} onClick={onClick}>\r\n      {icon}\r\n    </div>\r\n  )\r\n}\r\n","import React, { ReactElement } from 'react'\r\nimport { UpgradeView } from '../../interface/UpgradeView'\r\nimport ToEmoji from '../../utils/ToEmoji'\r\nimport ToggleButton from '../ToggleButton/ToggleButton'\r\nimport './Upgrades.css'\r\ninterface Props {\r\n  upgrades: UpgradeView[]\r\n}\r\n\r\nconst ToDemand = (k: string, amount: number, u: UpgradeView): ReactElement =>\r\n  <div className='demand' key={k}>\r\n    <div className='resource'>{ToEmoji(k)}</div>\r\n    <div className='amount'>x{amount}</div>\r\n    <ToggleButton icon={ToEmoji('shopping-cart')} state={u.requested} onClick={() => u.requestToggle()} />\r\n  </div>\r\n\r\nconst ToUpgrade = (u: UpgradeView, index: number): ReactElement =>\r\n  <div className='upgrade' key={index}>\r\n    <div className='effect'>\r\n      <div className='aspect'>{ToEmoji(u.aspect)}</div>\r\n      <div className='improvement'>{u.operation}{u.amount}</div>\r\n    </div>\r\n    <div className='demands'>{Object.keys(u.demands).map((k) => ToDemand(k, u.demands[k], u))}</div>\r\n  </div>\r\n\r\nexport default function Upgrades ({ upgrades }: Props): ReactElement {\r\n  return (\r\n    <div className='upgrades'>\r\n      {upgrades\r\n        .sort((a, b) => a.aspect < b.aspect ? 1 : -1)\r\n        .map(ToUpgrade)}\r\n    </div>\r\n  )\r\n}\r\n","import React, { ReactElement } from 'react'\r\nimport { ProductionView } from '../Items/Items'\r\nimport ProgressBar from '../ProgressBar/ProgressBar'\r\nimport './Production.css'\r\n\r\nconst ToProduction = (item: ProductionView, index: number): ReactElement =>\r\n  <div className='production' key={index}>\r\n    <ProgressBar percent={item.percent} always={(item.productionTime / 1000).toFixed(2) === '0.00'} />\r\n  </div>\r\n\r\ninterface Props {\r\n  productions: ProductionView[]\r\n}\r\n\r\nexport default function Productions ({ productions }: Props): ReactElement {\r\n  return (\r\n    <div className='productions'>\r\n      {productions.map(ToProduction)}\r\n    </div>\r\n  )\r\n}\r\n","import { Demand, ProductionList, Store, Supply, Upgrade } from 'progressciv'\r\n\r\nexport const DisplayItem = (store: Store, i: EntityComponents): boolean => {\r\n  const hasProduction = i.productionList.maximumActive > 0\r\n  const hasExisted = store.existed[i.supply.product.resource]\r\n  const hasNoDemands = Object.keys(i.demand.demands).length === 0\r\n  const hasAllDemandsCreated = Object.keys(i.demand.demands).reduce<boolean>((acc, k) => acc && store.existed[k], true)\r\n  const hasProductionUpgrades = i.upgrade.upgrades.filter((u) => u.aspect === 'production').length > 0\r\n  const hasProductionUpgradesWhichCanBeBuilt = i.upgrade.upgrades\r\n    .filter((u) => u.aspect === 'production')\r\n    .reduce<string[]>((acc, u) => [...acc, ...Object.keys(u.demands)], [])\r\n    .reduce<boolean>((acc, k) => acc && store.existed[k], true)\r\n\r\n  if (hasExisted) {\r\n    return true\r\n  }\r\n\r\n  if (hasProduction && hasNoDemands) {\r\n    return true\r\n  }\r\n\r\n  if (hasProduction && hasAllDemandsCreated) {\r\n    return true\r\n  }\r\n\r\n  if (hasProductionUpgrades && hasProductionUpgradesWhichCanBeBuilt) {\r\n    return true\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nexport interface EntityComponents {\r\n  demand: Demand\r\n  productionList: ProductionList\r\n  supply: Supply\r\n  upgrade: Upgrade\r\n}\r\n","import { Demand, ProductionList, Store, Supply, Upgrade, ISystem, Entity, HasComponent, getComponent, hasComponent } from 'progressciv'\r\nimport React, { ReactElement, useState } from 'react'\r\nimport StorageView from '../../interface/StorageView'\r\nimport ToEmoji, { HasEmoji } from '../../utils/ToEmoji'\r\nimport Requirements from '../Requirements/Requirements'\r\nimport './Items.css'\r\nimport ToggleButton from '../ToggleButton/ToggleButton'\r\nimport { UpgradeView } from '../../interface/UpgradeView'\r\nimport Upgrades from '../Upgrades/Upgrades'\r\nimport Productions from '../Productions/Productions'\r\nimport { useParams } from 'react-router-dom'\r\nimport { DisplayItem, EntityComponents } from '../../utils/DisplayItem'\r\n\r\nexport class ItemRenderSystem implements ISystem {\r\n  public static setItems: any = () => {}\r\n\r\n  update (_: number, entities: Entity[]): void {\r\n    const store = getComponent(entities\r\n      .filter(HasComponent(Store))[0], Store)\r\n    const items = entities\r\n      .filter(HasComponent(Demand))\r\n      .filter(HasComponent(ProductionList))\r\n      .filter(HasComponent(Supply))\r\n      .map<EntityComponents>((e) => ({\r\n      id: e.id,\r\n      demand: getComponent(e, Demand),\r\n      productionList: getComponent(e, ProductionList),\r\n      supply: getComponent(e, Supply),\r\n      upgrade: hasComponent(e, Upgrade) ? getComponent(e, Upgrade) : new Upgrade({ upgrades: [] })\r\n    }))\r\n\r\n    const itemsView: ItemView[] = items.map<ItemView>((i) => ({\r\n      displayItem: DisplayItem(store, i),\r\n      product: i.supply.product.resource,\r\n      quantity: i.supply.product.quantity,\r\n      storage: store.stocks[i.supply.product.resource],\r\n      capacity: store.capacities[i.supply.product.resource],\r\n      met: i.demand.met,\r\n      productions: i.productionList.productions.map((p) => ({\r\n        percent: Math.min(p.progress / p.productionTime * 100, 100),\r\n        productionTime: p.productionTime\r\n      })),\r\n      open: i.demand.open,\r\n      working: i.demand.working,\r\n      canWork: i.productionList.maximumActive > 0,\r\n      handleOpen: (): void => { i.demand.open = !i.demand.open },\r\n      handleWorking: (): void => { i.demand.working = !i.demand.working },\r\n      requirements: Object.keys(i.demand.demands)\r\n        .map((k) => ({\r\n          resource: k, quantity: i.demand.store.stocks[k] ?? 0, capacity: i.demand.store.capacities[k]\r\n        })),\r\n      upgrades: i.upgrade.upgrades.map((u) => ({\r\n        amount: u.amount,\r\n        aspect: u.aspect,\r\n        operation: u.operation,\r\n        demands: u.demands,\r\n        requested: u.requested,\r\n        requestToggle: (): void => {\r\n          u.requested = !u.requested\r\n        }\r\n      }))\r\n    }))\r\n\r\n    ItemRenderSystem.setItems(itemsView)\r\n  }\r\n}\r\n\r\nexport interface ProductionView {\r\n  percent: number\r\n  productionTime: number\r\n}\r\n\r\ninterface ItemView {\r\n  displayItem: boolean\r\n  product: string\r\n  quantity: number\r\n  storage: number\r\n  capacity: number\r\n  requirements: StorageView[]\r\n  met: boolean\r\n  productions: ProductionView[]\r\n  open: boolean\r\n  working: boolean\r\n  canWork: boolean\r\n  handleOpen: () => void\r\n  handleWorking: () => void\r\n  upgrades: UpgradeView[]\r\n}\r\n\r\nconst ToItem = (item: ItemView, i: number): ReactElement =>\r\n  <div className='item' key={i}>\r\n    {i === 0 &&\r\n      <h1 className='label'>\r\n        {ToEmoji(item.product)} <span hidden={!HasEmoji(item.product)}>{item.product}</span>\r\n      </h1>}\r\n    {item.displayItem &&\r\n      <div className='item-details'>\r\n        <div className='storehouse'>\r\n          <div className='open-button'>\r\n            {item.canWork && item.requirements.length > 0 && <ToggleButton icon={ToEmoji('allow demand to be met')} state={item.open} onClick={() => item.handleOpen()} />}\r\n          </div>\r\n          <Requirements requirements={item.requirements} met={item.met} />\r\n        </div>\r\n        <div className='workhouse'>\r\n          <div className='working-button'>\r\n            {item.canWork && <ToggleButton icon={ToEmoji('allow production')} state={item.working} onClick={() => item.handleWorking()} />}\r\n          </div>\r\n          <Productions productions={item.productions} />\r\n        </div>\r\n        <Upgrades upgrades={item.upgrades} />\r\n      </div>}\r\n  </div>\r\n\r\ninterface Params {\r\n  id: string\r\n}\r\n\r\nexport default function Items (): ReactElement {\r\n  const { id } = useParams<Params>()\r\n  const [items, setItems] = useState<ItemView[]>([])\r\n  ItemRenderSystem.setItems = setItems\r\n\r\n  return (\r\n    <div id='items'>\r\n      {items.filter((i) => i.product === id).map(ToItem)}\r\n    </div>\r\n  )\r\n}\r\n","import { Demand, ProductionList, Store, Supply, Upgrade, Entity, getComponent, hasComponent, HasComponent, ISystem } from 'progressciv'\r\nimport React, { ReactElement, useState } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { DisplayItem, EntityComponents } from '../../utils/DisplayItem'\r\nimport ToEmoji from '../../utils/ToEmoji'\r\nimport ToggleButton from '../ToggleButton/ToggleButton'\r\nimport './Storage.css'\r\n\r\ninterface StorageView {\r\n  display: boolean\r\n  product: string\r\n  amount: number\r\n  capacity: number\r\n  open: boolean\r\n  hasRequirements: boolean\r\n  working: boolean\r\n  canWork: boolean\r\n  handleOpen: () => void\r\n  handleWorking: () => void\r\n}\r\n\r\nexport class StorageRenderSystem implements ISystem {\r\n  public static setStorage: any = () => {}\r\n\r\n  update (_: number, entities: Entity[]): void {\r\n    const store = getComponent(entities\r\n      .filter(HasComponent(Store))[0], Store)\r\n    const items = entities\r\n      .filter(HasComponent(Demand))\r\n      .filter(HasComponent(ProductionList))\r\n      .filter(HasComponent(Supply))\r\n      .map<EntityComponents>((e) => ({\r\n      demand: getComponent(e, Demand),\r\n      productionList: getComponent(e, ProductionList),\r\n      supply: getComponent(e, Supply),\r\n      upgrade: hasComponent(e, Upgrade) ? getComponent(e, Upgrade) : new Upgrade({ upgrades: [] })\r\n    }))\r\n\r\n    const itemsView: StorageView[] = items.map<StorageView>((i) => ({\r\n      display: DisplayItem(store, i),\r\n      product: i.supply.product.resource,\r\n      amount: store.stocks[i.supply.product.resource] ?? 0,\r\n      capacity: store.capacities[i.supply.product.resource],\r\n      open: i.demand.open,\r\n      working: i.demand.working,\r\n      canWork: i.productionList.maximumActive > 0,\r\n      hasRequirements: Object.keys(i.demand.demands).length > 0,\r\n      handleOpen: (): void => { i.demand.open = !i.demand.open },\r\n      handleWorking: (): void => { i.demand.working = !i.demand.working }\r\n    }))\r\n\r\n    StorageRenderSystem.setStorage(itemsView)\r\n  }\r\n}\r\n\r\nconst ToStorageView = (unique: Unique<StorageView>, index: number): ReactElement =>\r\n  <tr key={index}>\r\n    <td className='open-button'>\r\n      {unique.isUnique && unique.value.hasRequirements && unique.value.canWork && <ToggleButton icon={ToEmoji('allow demand to be met')} state={unique.value.open} onClick={() => unique.value.handleOpen()} />}\r\n    </td>\r\n\r\n    <td className='working-button'>\r\n      {unique.isUnique && unique.value.canWork && <ToggleButton icon={ToEmoji('allow production')} state={unique.value.working} onClick={() => unique.value.handleWorking()} />}\r\n    </td>\r\n\r\n    <td className='product'>\r\n      <Link to={`/${unique.value.product}`}>{ToEmoji(unique.value.product)}</Link>\r\n    </td>\r\n    <td className='stockpile'>{unique.value.amount} / {unique.value.capacity}</td>\r\n  </tr>\r\n\r\ninterface Unique<T> {\r\n  value: T\r\n  isUnique: boolean\r\n}\r\n\r\nexport default function Storage (): ReactElement {\r\n  const [storage, setStorage] = useState<StorageView[]>([])\r\n  StorageRenderSystem.setStorage = setStorage\r\n\r\n  const displayedResources = storage.filter((s) => s.display)\r\n\r\n  const addUniqueness = displayedResources.map<Unique<StorageView>>((thing) => {\r\n    const _thing = thing\r\n    return {\r\n      value: thing,\r\n      isUnique: storage.filter(obj => {\r\n        return obj.product === _thing.product\r\n      }).length === 1\r\n    }\r\n  })\r\n\r\n  const uniqueArray = addUniqueness.filter((thing, index) => {\r\n    return index === addUniqueness.findIndex(obj => {\r\n      return obj.value.product === thing.value.product\r\n    })\r\n  })\r\n\r\n  return (\r\n    <table className='storage'>\r\n      <tbody>\r\n        {uniqueArray.map(ToStorageView)}\r\n      </tbody>\r\n    </table>\r\n  )\r\n}\r\n","import React, { ReactElement } from 'react'\r\nimport {\r\n  Switch,\r\n  Route\r\n} from 'react-router-dom'\r\nimport Items from '../Items/Items'\r\nimport Storage from '../Storage/Storage'\r\nimport './Home.css'\r\n\r\nexport default function Home (): ReactElement {\r\n  return (\r\n    <div className='home'>\r\n      <Storage />\r\n      <Switch>\r\n        <Route path='/:id'>\r\n          <Items />\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/logo.0c78ae67.png\";","import React, { ReactElement, useMemo, useRef } from 'react'\r\nimport { ProgressCivAPI } from 'progressciv'\r\nimport { ItemRenderSystem } from './component/Items/Items'\r\nimport BaseItems from './conf/BaseItems.json'\r\nimport './App.css'\r\nimport Home from './component/Home/Home'\r\nimport { StorageRenderSystem } from './component/Storage/Storage'\r\nimport { HashRouter } from 'react-router-dom'\r\nimport logo from './logo.png'\r\n\r\nlet isRunning: boolean = false\r\nconst Update = (progressCivAPI: ProgressCivAPI) => () => {\r\n  if (isRunning) {\r\n    console.log('killed')\r\n    return\r\n  }\r\n\r\n  isRunning = true\r\n  progressCivAPI.Update()\r\n  window.setTimeout(Update(progressCivAPI), 25)\r\n  isRunning = false\r\n}\r\n\r\nfunction App (): ReactElement {\r\n  const save = useRef<() => string>()\r\n\r\n  useMemo(() => {\r\n    const progressCivAPI = new ProgressCivAPI(BaseItems)\r\n    const itemRenderSystem = new ItemRenderSystem()\r\n    const storageRenderSystem = new StorageRenderSystem()\r\n\r\n    progressCivAPI.Instance.systems.push(itemRenderSystem)\r\n    progressCivAPI.Instance.systems.push(storageRenderSystem)\r\n\r\n    save.current = () => progressCivAPI.Save()\r\n    window.setTimeout(Update(progressCivAPI), 100)\r\n  }, [])\r\n\r\n  return (\r\n    <div>\r\n      <div className='App-header'>\r\n        <div className='App-logo'>\r\n          <img src={logo} alt='progress civ' />\r\n        </div>\r\n      </div>\r\n      <div className='App'>\r\n        <HashRouter>\r\n          <Home />\r\n        </HashRouter>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport './index.css'\r\nimport App from './App'\r\nimport reportWebVitals from './reportWebVitals'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals()\r\n"],"sourceRoot":""}