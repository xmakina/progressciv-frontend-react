{"version":3,"sources":["utils/ToEmoji.tsx","component/ProgressBar/ProgressBar.tsx","component/Requirements/Requirements.tsx","component/ToggleButton/ToggleButton.tsx","component/Upgrades/Upgrades.tsx","component/Productions/Productions.tsx","utils/DisplayItem.ts","component/Items/Items.tsx","component/Storage/Storage.tsx","component/Home/Home.tsx","logo.png","App.tsx","reportWebVitals.ts","index.tsx"],"names":["emoji","wheat","worker","wood","farm","forest","time","quantity","production","ToEmoji","label","title","undefined","ProgressBar","percent","always","children","className","style","width","ToRequirement","r","i","capacity","resource","Requirements","requirements","met","length","map","ToggleButton","onClick","state","icon","ToUpgrade","u","index","aspect","operation","amount","Object","keys","demands","k","requested","requestToggle","ToDemand","Upgrades","upgrades","sort","a","b","ToProduction","item","productionTime","toFixed","Productions","productions","DisplayItem","store","hasProduction","productionList","maximumActive","hasExisted","existed","supply","product","hasNoDemands","demand","hasAllDemandsCreated","reduce","acc","hasProductionUpgrades","upgrade","filter","hasProductionUpgradesWhichCanBeBuilt","ItemRenderSystem","_","entities","getComponent","HasComponent","Store","itemsView","Demand","ProductionList","Supply","e","id","hasComponent","Upgrade","displayItem","storage","stocks","capacities","p","Math","min","progress","open","working","canWork","handleOpen","handleWorking","setItems","ToItem","hidden","Items","useParams","useState","items","StorageRenderSystem","display","hasRequirements","setStorage","ToStorageView","unique","isUnique","value","to","floor","Storage","addUniqueness","s","thing","_thing","obj","uniqueArray","findIndex","Home","path","isRunning","Update","progressCivAPI","console","log","window","setTimeout","App","save","useRef","useMemo","ProgressCivAPI","BaseItems","itemRenderSystem","storageRenderSystem","Instance","systems","push","current","Save","src","logo","alt","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1a37eb03.chunk.js","sourcesContent":["import { ReactElement } from 'react'\n\nconst emoji: {[index: string]: string} = {\n  wheat: '🌽',\n  worker: '💪',\n  wood: '🌳',\n  farm: '🌾🌾',\n  forest: '🌲🌲🌲',\n  'large-red-circle': '🔴',\n  'large-green-circle': '🟢',\n  'allow production': '⚙️',\n  'allow demand to be met': '📦',\n  time: '⌛',\n  quantity: '⬆️',\n  'shopping-cart': '🛒',\n  production: '⚙️',\n  'building-site': '🏗️'\n}\n\nexport function HasEmoji (label: string): boolean {\n  return emoji[label] !== undefined\n}\n\nexport default function ToEmoji (label: string): ReactElement {\n  return (<span title={label}>{emoji[label] === undefined ? label : emoji[label]}</span>)\n}\n","import { ReactElement, ReactNode } from 'react'\nimport './ProgressBar.css'\n\ninterface Props {\n  percent: number\n  always?: boolean\n  children?: ReactNode\n}\n\nexport default function ProgressBar ({ percent = 0, always = false, children }: Props): ReactElement {\n  return (\n    <div className='production-bar' style={{ width: '100%' }}>\n      <span className='label'>{children}</span>\n      {!always && <div className='production-progress-bar bg-success' style={{ width: `${percent}%` }} />}\n      {always && <div className='production-progress-bar bg-success meter always'><span style={{ width: '100%' }}><span /></span></div>}\n    </div>\n  )\n}\n","import React, { ReactElement } from 'react'\nimport StorageView from '../../interface/StorageView'\nimport ToEmoji from '../../utils/ToEmoji'\nimport ProgressBar from '../ProgressBar/ProgressBar'\nimport './Requirements.css'\n\ninterface Props {\n  requirements?: StorageView[]\n  met?: boolean\n}\n\nconst ToRequirement = (r: StorageView, i: number): ReactElement =>\n  <div className='requirement' key={i}>\n    <ProgressBar percent={(r.quantity / r.capacity) * 100}>\n      {r.quantity} / {r.capacity} {ToEmoji(r.resource)}\n    </ProgressBar>\n  </div>\n\nexport default function Requirements ({ requirements = [], met = false }: Props): ReactElement {\n  if (requirements.length === 0) {\n    return (<div className='requirements none' />)\n  }\n\n  return (\n    <div className='requirements'>\n      {requirements.map(ToRequirement)}\n    </div>\n  )\n}\n","import { ReactElement } from 'react'\nimport './ToggleButton.css'\n\ninterface Props {\n  onClick: () => void\n  state?: boolean\n  icon: ReactElement\n}\n\nexport default function ToggleButton ({ onClick = () => {}, state = false, icon }: Props): ReactElement {\n  return (\n    <div className={`button ${state ? 'open' : 'closed'}`} onClick={onClick}>\n      {icon}\n    </div>\n  )\n}\n","import React, { ReactElement } from 'react'\nimport { UpgradeView } from '../../interface/UpgradeView'\nimport ToEmoji from '../../utils/ToEmoji'\nimport ToggleButton from '../ToggleButton/ToggleButton'\nimport './Upgrades.css'\ninterface Props {\n  upgrades: UpgradeView[]\n}\n\nconst ToDemand = (k: string, amount: number, u: UpgradeView): ReactElement =>\n  <div className='demand' key={k}>\n    <div className='resource'>{ToEmoji(k)}</div>\n    <div className='amount'>x{amount}</div>\n    <ToggleButton icon={ToEmoji('shopping-cart')} state={u.requested} onClick={() => u.requestToggle()} />\n  </div>\n\nconst ToUpgrade = (u: UpgradeView, index: number): ReactElement =>\n  <div className='upgrade' key={index}>\n    <div className='effect'>\n      <div className='aspect'>{ToEmoji(u.aspect)}</div>\n      <div className='improvement'>{u.operation}{u.amount}</div>\n    </div>\n    <div className='demands'>{Object.keys(u.demands).map((k) => ToDemand(k, u.demands[k], u))}</div>\n  </div>\n\nexport default function Upgrades ({ upgrades }: Props): ReactElement {\n  return (\n    <div className='upgrades'>\n      {upgrades\n        .sort((a, b) => a.aspect < b.aspect ? 1 : -1)\n        .map(ToUpgrade)}\n    </div>\n  )\n}\n","import React, { ReactElement } from 'react'\nimport { ProductionView } from '../Items/Items'\nimport ProgressBar from '../ProgressBar/ProgressBar'\nimport './Production.css'\n\nconst ToProduction = (item: ProductionView, index: number): ReactElement =>\n  <div className='production' key={index}>\n    <ProgressBar percent={item.percent} always={(item.productionTime / 1000).toFixed(2) === '0.00'} />\n  </div>\n\ninterface Props {\n  productions: ProductionView[]\n}\n\nexport default function Productions ({ productions }: Props): ReactElement {\n  return (\n    <div className='productions'>\n      {productions.map(ToProduction)}\n    </div>\n  )\n}\n","import { Demand, ProductionList, Store, Supply, Upgrade } from 'progressciv'\n\nexport const DisplayItem = (store: Store, i: EntityComponents): boolean => {\n  const hasProduction = i.productionList.maximumActive > 0\n  const hasExisted = store.existed[i.supply.product.resource]\n  const hasNoDemands = Object.keys(i.demand.demands).length === 0\n  const hasAllDemandsCreated = Object.keys(i.demand.demands).reduce<boolean>((acc, k) => acc && store.existed[k], true)\n  const hasProductionUpgrades = i.upgrade.upgrades.filter((u) => u.aspect === 'production').length > 0\n  const hasProductionUpgradesWhichCanBeBuilt = i.upgrade.upgrades\n    .filter((u) => u.aspect === 'production')\n    .reduce<string[]>((acc, u) => [...acc, ...Object.keys(u.demands)], [])\n    .reduce<boolean>((acc, k) => acc && store.existed[k], true)\n\n  if (hasExisted) {\n    return true\n  }\n\n  if (hasProduction && hasNoDemands) {\n    return true\n  }\n\n  if (hasProduction && hasAllDemandsCreated) {\n    return true\n  }\n\n  if (hasProductionUpgrades && hasProductionUpgradesWhichCanBeBuilt) {\n    return true\n  }\n\n  return false\n}\n\nexport interface EntityComponents {\n  demand: Demand\n  productionList: ProductionList\n  supply: Supply\n  upgrade: Upgrade\n}\n","import { Demand, ProductionList, Store, Supply, Upgrade, ISystem, Entity, HasComponent, getComponent, hasComponent } from 'progressciv'\nimport React, { ReactElement, useState } from 'react'\nimport StorageView from '../../interface/StorageView'\nimport ToEmoji, { HasEmoji } from '../../utils/ToEmoji'\nimport Requirements from '../Requirements/Requirements'\nimport './Items.css'\nimport ToggleButton from '../ToggleButton/ToggleButton'\nimport { UpgradeView } from '../../interface/UpgradeView'\nimport Upgrades from '../Upgrades/Upgrades'\nimport Productions from '../Productions/Productions'\nimport { useParams } from 'react-router-dom'\nimport { DisplayItem, EntityComponents } from '../../utils/DisplayItem'\n\nexport class ItemRenderSystem implements ISystem {\n  public static setItems: any = () => {}\n\n  update (_: number, entities: Entity[]): void {\n    const store = getComponent(entities\n      .filter(HasComponent(Store))[0], Store)\n    const items = entities\n      .filter(HasComponent(Demand))\n      .filter(HasComponent(ProductionList))\n      .filter(HasComponent(Supply))\n      .map<EntityComponents>((e) => ({\n      id: e.id,\n      demand: getComponent(e, Demand),\n      productionList: getComponent(e, ProductionList),\n      supply: getComponent(e, Supply),\n      upgrade: hasComponent(e, Upgrade) ? getComponent(e, Upgrade) : new Upgrade({ upgrades: [] })\n    }))\n\n    const itemsView: ItemView[] = items.map<ItemView>((i) => ({\n      displayItem: DisplayItem(store, i),\n      product: i.supply.product.resource,\n      quantity: i.supply.product.quantity,\n      storage: store.stocks[i.supply.product.resource],\n      capacity: store.capacities[i.supply.product.resource],\n      met: i.demand.met,\n      productions: i.productionList.productions.map((p) => ({\n        percent: Math.min(p.progress / p.productionTime * 100, 100),\n        productionTime: p.productionTime\n      })),\n      open: i.demand.open,\n      working: i.demand.working,\n      canWork: i.productionList.maximumActive > 0,\n      handleOpen: (): void => { i.demand.open = !i.demand.open },\n      handleWorking: (): void => { i.demand.working = !i.demand.working },\n      requirements: Object.keys(i.demand.demands)\n        .map((k) => ({\n          resource: k, quantity: i.demand.store.stocks[k] ?? 0, capacity: i.demand.store.capacities[k]\n        })),\n      upgrades: i.upgrade.upgrades.map((u) => ({\n        amount: u.amount,\n        aspect: u.aspect,\n        operation: u.operation,\n        demands: u.demands,\n        requested: u.requested,\n        requestToggle: (): void => {\n          u.requested = !u.requested\n        }\n      }))\n    }))\n\n    ItemRenderSystem.setItems(itemsView)\n  }\n}\n\nexport interface ProductionView {\n  percent: number\n  productionTime: number\n}\n\ninterface ItemView {\n  displayItem: boolean\n  product: string\n  quantity: number\n  storage: number\n  capacity: number\n  requirements: StorageView[]\n  met: boolean\n  productions: ProductionView[]\n  open: boolean\n  working: boolean\n  canWork: boolean\n  handleOpen: () => void\n  handleWorking: () => void\n  upgrades: UpgradeView[]\n}\n\nconst ToItem = (item: ItemView, i: number): ReactElement =>\n  <div className='item' key={i}>\n    {i === 0 &&\n      <h1 className='label'>\n        {ToEmoji(item.product)} <span hidden={!HasEmoji(item.product)}>{item.product}</span>\n      </h1>}\n    {item.displayItem &&\n      <div className='item-details'>\n        <div className='storehouse'>\n          <div className='open-button'>\n            {item.canWork && item.requirements.length > 0 && <ToggleButton icon={ToEmoji('allow demand to be met')} state={item.open} onClick={() => item.handleOpen()} />}\n          </div>\n          <Requirements requirements={item.requirements} met={item.met} />\n        </div>\n        <div className='workhouse'>\n          <div className='working-button'>\n            {item.canWork && <ToggleButton icon={ToEmoji('allow production')} state={item.working} onClick={() => item.handleWorking()} />}\n          </div>\n          <Productions productions={item.productions} />\n        </div>\n        <Upgrades upgrades={item.upgrades} />\n      </div>}\n  </div>\n\ninterface Params {\n  id: string\n}\n\nexport default function Items (): ReactElement {\n  const { id } = useParams<Params>()\n  const [items, setItems] = useState<ItemView[]>([])\n  ItemRenderSystem.setItems = setItems\n\n  return (\n    <div id='items'>\n      {items.filter((i) => i.product === id).map(ToItem)}\n    </div>\n  )\n}\n","import { Demand, ProductionList, Store, Supply, Upgrade, Entity, getComponent, hasComponent, HasComponent, ISystem } from 'progressciv'\nimport React, { ReactElement, useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport { DisplayItem, EntityComponents } from '../../utils/DisplayItem'\nimport ToEmoji from '../../utils/ToEmoji'\nimport ToggleButton from '../ToggleButton/ToggleButton'\nimport './Storage.css'\n\ninterface StorageView {\n  display: boolean\n  product: string\n  amount: number\n  capacity: number\n  open: boolean\n  hasRequirements: boolean\n  working: boolean\n  canWork: boolean\n  handleOpen: () => void\n  handleWorking: () => void\n}\n\nexport class StorageRenderSystem implements ISystem {\n  public static setStorage: any = () => { }\n\n  update (_: number, entities: Entity[]): void {\n    const store = getComponent(entities\n      .filter(HasComponent(Store))[0], Store)\n    const items = entities\n      .filter(HasComponent(Demand))\n      .filter(HasComponent(ProductionList))\n      .filter(HasComponent(Supply))\n      .map<EntityComponents>((e) => ({\n      demand: getComponent(e, Demand),\n      productionList: getComponent(e, ProductionList),\n      supply: getComponent(e, Supply),\n      upgrade: hasComponent(e, Upgrade) ? getComponent(e, Upgrade) : new Upgrade({ upgrades: [] })\n    }))\n\n    const itemsView: StorageView[] = items.map<StorageView>((i) => ({\n      display: DisplayItem(store, i),\n      product: i.supply.product.resource,\n      amount: store.stocks[i.supply.product.resource] ?? 0,\n      capacity: store.capacities[i.supply.product.resource],\n      open: i.demand.open,\n      working: i.demand.working,\n      canWork: i.productionList.maximumActive > 0,\n      hasRequirements: Object.keys(i.demand.demands).length > 0,\n      handleOpen: (): void => { i.demand.open = !i.demand.open },\n      handleWorking: (): void => { i.demand.working = !i.demand.working }\n    }))\n\n    StorageRenderSystem.setStorage(itemsView)\n  }\n}\n\nconst ToStorageView = (unique: Unique<StorageView>, index: number): ReactElement =>\n  <tr key={index}>\n    <td className='open-button'>\n      {unique.isUnique && unique.value.hasRequirements && unique.value.canWork && <ToggleButton icon={ToEmoji('allow demand to be met')} state={unique.value.open} onClick={() => unique.value.handleOpen()} />}\n    </td>\n\n    <td className='working-button'>\n      {unique.isUnique && unique.value.canWork && <ToggleButton icon={ToEmoji('allow production')} state={unique.value.working} onClick={() => unique.value.handleWorking()} />}\n    </td>\n\n    <td className='product'>\n      <Link to={`/${unique.value.product}`}>{ToEmoji(unique.value.product)}</Link>\n    </td>\n    <td className='stockpile'>\n      <Link to={`/${unique.value.product}`}>\n        {Math.floor(unique.value.amount)} / {unique.value.capacity}\n      </Link>\n    </td>\n  </tr>\n\ninterface Unique<T> {\n  value: T\n  isUnique: boolean\n}\n\nexport default function Storage (): ReactElement {\n  const [storage, setStorage] = useState<StorageView[]>([])\n  StorageRenderSystem.setStorage = setStorage\n\n  const displayedResources = storage.filter((s) => s.display)\n\n  const addUniqueness = displayedResources.map<Unique<StorageView>>((thing) => {\n    const _thing = thing\n    return {\n      value: thing,\n      isUnique: storage.filter(obj => {\n        return obj.product === _thing.product\n      }).length === 1\n    }\n  })\n\n  const uniqueArray = addUniqueness.filter((thing, index) => {\n    return index === addUniqueness.findIndex(obj => {\n      return obj.value.product === thing.value.product\n    })\n  })\n\n  return (\n    <table className='storage'>\n      <tbody>\n        {uniqueArray.map(ToStorageView)}\n      </tbody>\n    </table>\n  )\n}\n","import React, { ReactElement } from 'react'\nimport {\n  Switch,\n  Route\n} from 'react-router-dom'\nimport Items from '../Items/Items'\nimport Storage from '../Storage/Storage'\nimport './Home.css'\n\nexport default function Home (): ReactElement {\n  return (\n    <div className='home'>\n      <Storage />\n      <Switch>\n        <Route path='/:id'>\n          <Items />\n        </Route>\n      </Switch>\n    </div>\n  )\n}\n","export default __webpack_public_path__ + \"static/media/logo.0c78ae67.png\";","import React, { ReactElement, useMemo, useRef } from 'react'\nimport { ProgressCivAPI } from 'progressciv'\nimport { ItemRenderSystem } from './component/Items/Items'\nimport BaseItems from './conf/BaseItems.json'\nimport './App.css'\nimport Home from './component/Home/Home'\nimport { StorageRenderSystem } from './component/Storage/Storage'\nimport { HashRouter } from 'react-router-dom'\nimport logo from './logo.png'\n\nlet isRunning: boolean = false\nconst Update = (progressCivAPI: ProgressCivAPI): void => {\n  if (!isRunning) {\n    isRunning = true\n  } else {\n    console.log('killed')\n    return\n  }\n\n  window.setTimeout(() => {\n    progressCivAPI.Update()\n    isRunning = false\n    Update(progressCivAPI)\n  }, 25)\n}\n\nfunction App (): ReactElement {\n  const save = useRef<() => string>()\n\n  useMemo(() => {\n    const progressCivAPI = new ProgressCivAPI(BaseItems)\n    const itemRenderSystem = new ItemRenderSystem()\n    const storageRenderSystem = new StorageRenderSystem()\n\n    progressCivAPI.Instance.systems.push(itemRenderSystem)\n    progressCivAPI.Instance.systems.push(storageRenderSystem)\n\n    save.current = () => progressCivAPI.Save()\n    Update(progressCivAPI)\n    isRunning = true\n  }, [])\n\n  return (\n    <div>\n      <div className='App-header'>\n        <div className='App-logo'>\n          <img src={logo} alt='progress civ' />\n        </div>\n      </div>\n      <div className='App'>\n        <HashRouter>\n          <Home />\n        </HashRouter>\n      </div>\n    </div>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}